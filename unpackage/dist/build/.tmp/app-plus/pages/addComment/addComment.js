(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addComment/addComment"],{"15bc":function(t,e,a){"use strict";a.r(e);var s=a("adfb"),i=a("55b7");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("42cd");var o,r=a("f0c5"),c=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);e["default"]=c.exports},"2cb1":function(t,e,a){},4240:function(t,e,a){"use strict";(function(t){a("f9cd"),a("921b");s(a("66fd"));var e=s(a("15bc"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"42cd":function(t,e,a){"use strict";var s=a("2cb1"),i=a.n(s);i.a},"4fc7":function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("ec2b"),n={data:function(){var t;return t={policy:"",signature:"",host:"",dir:"",accessid:"",evaluateList:[],getEvaluate:[],stars:[0,1,2,3,4],normalSrc:"/img/news/v.png",selectedSrc:"/img/news/five-pointed_star.png",halfSrc:"/img/news/v.png",keylist:[0,0],titlelist:["物流服务","服务态度"],scrollTop:0,starDesc:"非常满意，无可挑剔"},s(t,"policy",""),s(t,"signature",""),s(t,"host",""),s(t,"dir",""),s(t,"accessid",""),s(t,"videoUrl",""),s(t,"images",[]),s(t,"depict_star",0),s(t,"order_id",0),s(t,"page",1),s(t,"page_size",10),s(t,"count",1),s(t,"list",[]),s(t,"check",0),s(t,"tempFilePaths",""),t},components:{},props:{},onLoad:function(t){t.order_id&&this.setData({order_id:t.order_id}),this.getData(),this.getAli()},onShow:function(){},onPullDownRefresh:function(){var t=this;t.setData({page:1})},onReachBottom:function(){},methods:{setData:function(t){for(var e in t){var a=t[e];this[e]=a}},getEvaluateFun:function(){var t=this;i.ajaxs("evaluate/getLableList","",function(e){t.setData({getEvaluate:e.data.list})})},proposal:function(t){t.currentTarget.dataset.goods_id;var e=t.currentTarget.dataset.i,a=this.list;a[e].content=t.detail.value,this.setData({list:a})},proposalClick:function(t){var e=this,a=this.list,n=[];a.forEach(function(t){var e,a=(e={depict_star:t.depict_star,content:t.content,images:t.images},s(e,"depict_star",t.keylist[0]),s(e,"videoUrl",t.videoUrl),s(e,"goods_id",t.goods_id),s(e,"order_goods_id",t.og_id),s(e,"labeldata",t.labeldata),e);n.push(a)});var o={order_id:e.order_id,array:n};i.ajaxs("evaluate/evaluate",o,function(t){wx.showToast({title:t.msg,icon:"none",mask:!0}),1==t.status&&(wx.setStorage({key:"refreshIds",data:"1"}),setTimeout(function(){wx.navigateBack({delta:1})},500))})},changeBtn:function(t,e,a,s){var i=this,n=a;if(0==s){this.list[t].evaluatetext[e].yesId=1;i.list[t].labeldata}else{var o=i.list[t].labeldata;o.splice(o.indexOf(n),1),this.list[t].evaluatetext[e].yesId=0}},upload:function(t){var e=this,a=t.currentTarget.dataset.i,s=e.list;e.list[a].count>e.list[a].num?wx.chooseImage({count:e.list[a].count-e.list[a].num,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){var i=t.tempFilePaths;i.forEach(function(t,i,n){wx.showToast({title:"正在上传...",icon:"success",mask:!0,duration:8e3});var o=Date.parse(new Date)/1e3,r=String(o)+String(Math.floor(50*Math.random()));wx.uploadFile({url:e.host,filePath:t,name:"file",formData:{name:t,key:e.dir+"/"+r+".png",policy:e.policy,OSSAccessKeyId:e.accessid,success_action_status:"200",signature:e.signature},success:function(t){s[a].images;var i=e.host+"/"+e.dir+"/"+r+".png";s[a].images=s[a].images.concat(i),s[a].num=s[a].num+1,e.setData({list:s}),wx.hideToast()},fail:function(t){}})});var n=t.tempFilePaths;e.setData({tempFilePaths:n})}}):wx.showToast({title:"上传数量已达上限"})},listenerButtonPreviewImage:function(t){var e=t.target.dataset.index,a=t.currentTarget.setdata.i,s=this;wx.previewImage({current:s.list[a].images[e],urls:s.list[1].images,success:function(t){},fail:function(){}})},deleteImg:function(t){var e=t.currentTarget.dataset.i,a=this.list,s=t.currentTarget.dataset.index;a[e].images.splice(s,1),this.setData({list:a})},upload_video:function(t){var e=this,a=t.currentTarget.dataset.i;wx.chooseVideo({sourceType:["album","camera"],maxDuration:60,camera:"back",compressed:!0,size:100,success:function(t){var i=t.tempFilePath,n=i.lastIndexOf("."),o=i,r=o.substring(n,o.length).toUpperCase();if(".M4A"==r)return wx.showToast({title:"视频格式不正确，请重新选择",icon:"none",mask:!0,duration:1e3}),!1;if(t.size/1024/1024>100)wx.showToast({title:"视频超过100MB,请重新选择",icon:"none",mask:!0,duration:1e3});else{var c=Date.parse(new Date)/1e3,l=String(c)+String(Math.floor(50*Math.random()));wx.showToast(s({title:"正在上传...",icon:"success",mask:!0,duration:1e4},"icon","none")),wx.uploadFile({url:e.host,filePath:t.tempFilePath,name:"file",formData:{name:t.tempFilePaths,key:e.dir+"/"+l+".mp4",policy:e.policy,OSSAccessKeyId:e.accessid,success_action_status:"200",signature:e.signature},success:function(t){var s=e.host+"/"+e.dir+"/"+l+".mp4",i=e.list;i[a].videoUrl=s,e.setData({list:i}),wx.hideToast()},fail:function(t){wx.hideToast()}})}},fail:function(t){}})},deleteVideo:function(t){var e=t.currentTarget.dataset.i,a="list["+e+"].videoUrl";this.setData(s({},a,""))},getData:function(){var t=this,e={order_id:t.order_id};i.ajaxs("evaluate/getLableList","",function(e){t.setData({getEvaluate:e.data.list})}),i.ajaxs("evaluate/evaluateOrder",e,function(e){e.data.list&&e.data.list.forEach(function(e){e.num=0,e.count=9,e.content="",e.keylist=[5],e.images=[],e.titlelist=["描述相符"],e.stars=[0,1,2,3,4],e.normalSrc="/assets/img/goods/v.png",e.selectedSrc="/assets/img/goods/five-pointed_star.png",e.halfSrc="/assets/img/goods/v.png",e.scrollTop=0,e.videoUrl="",e.labeldata=[];for(var a=[],s=0;s<t.getEvaluate.length;s++){var i={name:t.getEvaluate[s],yesId:0};a.push(i)}e.evaluatetext=a}),t.setData({list:e.data.list})})},getAli:function(){var t=this,e={type:1};i.ajaxs("index/getOssPolicy",e,function(e){t.setData({policy:e.data.policy,signature:e.data.signature,host:e.data.host,dir:e.data.dir,accessid:e.data.accessid})})}}};e.default=n},"55b7":function(t,e,a){"use strict";a.r(e);var s=a("4fc7"),i=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);e["default"]=i.a},adfb:function(t,e,a){"use strict";var s,i=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"b",function(){return i}),a.d(e,"c",function(){return n}),a.d(e,"a",function(){return s})}},[["4240","common/runtime","common/vendor"]]]);