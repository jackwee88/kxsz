(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/mydiscount/mydiscount"],{"0075":function(t,a,e){"use strict";(function(t){e("f9cd"),e("921b");n(e("66fd"));var a=n(e("a359"));function n(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("6e42")["createPage"])},"52c3":function(t,a,e){"use strict";e.r(a);var n=e("ecd6"),i=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(a,t,function(){return n[t]})}(o);a["default"]=i.a},9204:function(t,a,e){"use strict";var n=e("fd46"),i=e.n(n);i.a},"930c":function(t,a,e){"use strict";var n,i=function(){var t=this,a=t.$createElement;t._self._c},o=[];e.d(a,"b",function(){return i}),e.d(a,"c",function(){return o}),e.d(a,"a",function(){return n})},a359:function(t,a,e){"use strict";e.r(a);var n=e("930c"),i=e("52c3");for(var o in i)"default"!==o&&function(t){e.d(a,t,function(){return i[t]})}(o);e("9204");var s,c=e("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);a["default"]=r.exports},ecd6:function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("ec2b"),i={data:function(){return{total:"0",mydiscount:[],page:1,page_size:10,count:1,prv_money:0,checkboxArr:[{name:"不使用优惠券",checked:!1}],checkValue:!1,way:"",p_id:"",ct_id:"",ar_id:"",score:"",quantity:"",price:"",goods_sku_id:"",money:"",discount:"",totals:"",integral:""}},components:{},props:{},onLoad:function(t){1==t.way&&this.setData({way:1,money:t.money,prv_money:t.prv_money,p_id:t.p_id,ct_id:t.ct_id,ar_id:t.ar_id,quantity:t.quantity,price:t.price,score:t.score,goods_sku_id:t.goods_sku_id});var a=this;a.setData({page:1}),a.getData()},onShow:function(t){},methods:{setData:function(t){for(var a in t){var e=t[a];this[a]=e}},getData:function(){var t=this,a={page:t.page,page_size:t.page_size};t.studylist;t.count<t.page?wx.showToast({title:"暂无更多信息"}):n.ajaxs("shop/usercouponList",a,function(a){var e=t.mydiscount;if(t.setData({total:a.data.total,page:t.page+1,count:a.data.count>1?a.data.count:1,mydiscount:e.concat(a.data.list)}),wx.stopPullDownRefresh(),1==t.way){for(var n=t.mydiscount.length,i=t.mydiscount,o=0;o<n;o++)t.price>i[o].couponcondition?i[o].if_use=!0:i[o].if_use=!1;t.setData({mydiscount:i})}else{n=t.mydiscount.length;var s=t.mydiscount;for(o=0;o<n;o++)s[o].if_use=!0;t.setData({mydiscount:s})}})},checkboxChange:function(t){var a=!t.currentTarget.dataset.value,e=t.currentTarget.dataset.index,i=this.checkboxArr;if(i[e].checked=!i[e].checked,this.setData({checkValue:a,checkboxArr:i}),1==this.checkValue){if(1!=this.way)return;var o=t.currentTarget.dataset.if_use,s="",c=0,r=parseFloat(this.money)+parseFloat(this.prv_money)-parseFloat(c),u=r.toFixed(2);if(u<=0&&(u=.01),0==o)return;var d={ct_id:this.ct_id,p_id:this.p_id,ar_id:this.ar_id,score:this.score,cp_id:0,quantity:this.quantity,goods_sku_id:this.goods_sku_id};n.ajaxs("goods/OrderMoney",d,function(t){if(0==t.data.send_status)return wx.showToast({title:"您的地址不在配送范围内哦 ~,请返回重新选择",icon:"none"}),void wx.navigateBack({delta:1});var a=getCurrentPages(),e=a[a.length-2];e.discount=s,e.totals=t.data.amount.toFixed(2),e.integral=t.data.use_integral,e.prv_money=c,wx.navigateBack({delta:1})})}},confirm:function(){t("log",this.checkValue," at pages\\my\\mydiscount\\mydiscount.vue:304")},click:function(t){if(1==this.way){var a=t.currentTarget.dataset.if_use,e=t.currentTarget.dataset.discount_id,i=t.currentTarget.dataset.money,o={ct_id:this.ct_id,p_id:this.p_id,ar_id:this.ar_id,score:this.score,cp_id:e,quantity:this.quantity,goods_sku_id:this.goods_sku_id},s=parseFloat(this.money)+parseFloat(this.prv_money)-parseFloat(i),c=s.toFixed(2);c<=0&&(c=.01),0!=a&&n.ajaxs("goods/OrderMoney",o,function(t){var a=getCurrentPages(),n=a[a.length-2];n.discount=e,n.totals=t.data.amount.toFixed(2),n.integral=t.data.use_integral,n.prv_money=i,wx.navigateBack({delta:1})})}},toTop:function(t){var a=this;a.pageScrollTo({scrollTop:0,duration:0})}}};a.default=i}).call(this,e("0de9")["default"])},fd46:function(t,a,e){}},[["0075","common/runtime","common/vendor"]]]);