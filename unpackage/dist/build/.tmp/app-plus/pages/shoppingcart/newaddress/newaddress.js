(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shoppingcart/newaddress/newaddress"],{"18e8":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a("ec2b"),i={data:function(){return{name:"",tel:"",detailedAddress:"",region:[],selected:!1,type:"",ar_id:"",index:"",p_id:"",quantity:"",cp_id:"",score:"",ct_id:"",goods_sku_id:"",address:"",totals:"",transport_total:"",s:0}},components:{},props:{},onLoad:function(t){var e=this,a=parseInt(t.ar_id);if(this.goods_sku_id=t.goods_sku_id,void 0!=t.list){if(wx.setNavigationBarTitle({title:"编辑地址"}),void 0==a)return this.type="",!1;e.type=1,e.ar_id=a,e.index=t.index,s.ajax({url:"address/onelist",data:{ar_id:a},success:function(t){e.name=t.data.person,e.tel=t.data.mobile,e.region=[t.data.province,t.data.city,t.data.area],e.detailedAddress=t.data.address,e.selected=t.data.default}})}t.p_id&&(this.p_id=t.p_id,this.quantity=t.quantity,this.cp_id=t.cp_id,this.score=t.score,this.ct_id=t.ct_id)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{bindRegionChange:function(t){this.region=t.detail.value},inputChange:function(t){var e=t.currentTarget,a=t.detail;this[e.dataset.value]=a.value},selectList:function(){this.selected=!this.selected},save:function(){t("log",this.region," at pages\\shoppingcart\\newaddress\\newaddress.vue:184");var e=this.region[0]+this.region[1]+this.region[2]||"";"undefined"==e&&(e="");var a=this;if(!/^1\d{10}$/.test(this.tel))return wx.showToast({title:"手机号不合法",icon:"none"}),!1;var i={person:this.name,mobile:this.tel,address:this.detailedAddress,default:this.selected?1:0,province:this.region[0],city:this.region[1],area:this.region[2],ar_id:this.ar_id,goods_sku_id:this.goods_sku_id},n={ar_id:this.ar_id,p_id:this.p_id,quantity:this.quantity,score:this.score,ct_id:this.ct_id,cp_id:this.cp_id};1==this.type?s.ajax({url:"address/edit",data:i,success:function(e){if(1==e.status){wx.showToast({title:"修改成功",duration:2e3,icon:"none"});var i=getCurrentPages(),d=i[i.length-2];1==a.selected&&s.ajax({url:"goods/OrderMoney",data:n,success:function(e){var s=getCurrentPages(),i=s[s.length-3];if(i&&"pages/onlinestore/sureorder/sureorder"==i.__route__){var n={address:e.data.address,ar_is:a.ar_id,area:e.data.area,city:e.data.city,province:e.data.province,mobile:a.tel,person:a.name};t("log",n," at pages\\shoppingcart\\newaddress\\newaddress.vue:251"),i.address=n,i.totals=e.data.amount.toFixed(2),i.transport_total=e.data.transport,i.s=1}t("log",i.data," at pages\\shoppingcart\\newaddress\\newaddress.vue:259"),d&&d.onLoad(),wx.navigateBack({delta:1})}})}else wx.showModal({title:"错误提示",content:e.msg,showCancel:!1})}}):s.ajax({url:"address/add",data:i,success:function(t){if(1==t.status){wx.showToast({title:"添加成功",duration:2e3});var e=getCurrentPages(),i=e[e.length-2];i.changeData(),1==a.selected&&(n.ar_id=t.data.ar_id,n.goods_sku_id=a.goods_sku_id,s.ajax({url:"goods/OrderMoney",data:n,success:function(a){if(0==a.data.send_status)return wx.showToast({title:"您所添加的地址不在配送范围内哦 ~",icon:"none"}),void wx.navigateBack({delta:1});var s=e[e.length-3];if(s){if("pages/onlinestore/sureorder/sureorder"==s.__route__){var i={address:t.data.address,ar_id:t.data.ar_id,area:t.data.area,city:t.data.city,province:t.data.province,mobile:t.data.mobile,person:t.data.person};s.address=i,s.totals=a.data.amount.toFixed(2),s.transport_total=a.data.transport}wx.navigateBack({delta:1})}}}))}else wx.showModal({title:"错误提示",content:t.msg,showCancel:!1})}})},toTop:function(t){var e=this;e.pageScrollTo({scrollTop:0,duration:0})}}};e.default=i}).call(this,a("0de9")["default"])},8972:function(t,e,a){"use strict";var s=a("8e33"),i=a.n(s);i.a},"8e33":function(t,e,a){},b93f:function(t,e,a){"use strict";var s,i=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"b",function(){return i}),a.d(e,"c",function(){return n}),a.d(e,"a",function(){return s})},c9db:function(t,e,a){"use strict";a.r(e);var s=a("18e8"),i=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);e["default"]=i.a},e568:function(t,e,a){"use strict";(function(t){a("f9cd"),a("921b");s(a("66fd"));var e=s(a("ee30"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},ee30:function(t,e,a){"use strict";a.r(e);var s=a("b93f"),i=a("c9db");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("8972");var d,o=a("f0c5"),r=Object(o["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],d);e["default"]=r.exports}},[["e568","common/runtime","common/vendor"]]]);