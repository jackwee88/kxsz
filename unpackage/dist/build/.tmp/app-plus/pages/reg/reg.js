(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reg/reg"],{"217e":function(e,t,n){"use strict";var a={"w-picker":()=>Promise.all([n.e("common/vendor"),n.e("components/w-picker/w-picker")]).then(n.bind(null,"d3c6"))},o=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a})},"22c5":function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("60db");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){return Promise.all([n.e("common/vendor"),n.e("components/w-picker/w-picker")]).then(n.bind(null,"d3c6"))},l={components:{wPicker:u},data:function(){return{school_index:-1,school:[],array:["一年级","二年级","三年级","四年级","五年级","六年级"],arrayClass:["1班","2班","3班","4班","5班","6班","7班","8班","9班","10班","11班","12班","13班","14班","15班"],region:["福建省","厦门市","思明区"],uploadInfo:{username:"",mobile:"",class:"",grade:"",province:"",city:"",area:"",region:["福建省","厦门市","思明区"],code:"",school:""},userinfo:{},sms_zt:"发送验证码",second:"",nullHouse1:!1,nullHouse2:!0,mySchool:"",phone:"",noPhone:"false",type:"",selected:!1,selected1:!1}},onLoad:function(t){var n=this;(0,o.ajax)({url:"index/getSchool",data:{},success:function(t){for(var a=t.data.data.list,o=0;o<a.length;o++)n.school=n.school.concat(a[o].school_name);e("log",n.school," at pages\\reg\\reg.vue:131")}}),wx.getStorageSync("wxPhone")&&this.setData({"uploadInfo.region":["请选择省","市","区"],"uploadInfo.mobile":wx.getStorageSync("wxPhone")}),""!=a.getStorageSync("phone")&&a.getStorageSync("phone")||(this.noPhone=!0,(0,o.ajax)({url:"index/getProfile",data:{},success:function(e){n.uploadInfo.mobile=e.data.data.mobile}}))},methods:{setData:function(e){for(var t in e){var n=e[t];this[t]=n}},bindDateChange:function(e){this.uploadInfo.birthday=e.detail.value},bindPickerChange:function(e){this.uploadInfo.gender=Number(e.detail.value)+1},bindClassChange:function(e){this.uploadInfo.class=e.target.value},bindGradeChange:function(e){this.uploadInfo.grade=Number(e.detail.value)+1},bindRegionChange:function(e){this.setData({"uploadInfo.region":e.detail.value,"uploadInfo.province":e.detail.value[0],"uploadInfo.city":e.detail.value[1],"uploadInfo.area":e.detail.value[2]})},inputChange:function(e){var t=e.currentTarget.dataset.type;this.setData(i({},t,e.detail.value))},inputPhoneChange:function(e){e.currentTarget.dataset.type;this.setData({phone:e.detail.value})},save:function(e){var t=this.uploadInfo;(0,o.ajax)({url:"/index/registerProfile",data:t,success:function(e){1==e.data.status?wx.showToast({title:"成功",icon:"none",mask:"true"}):wx.showToast({title:e.data.msg,icon:"none",mask:"true"}),setTimeout(function(){wx.navigateBack({delta:1})},1e3)}})},bindCityChange:function(e){this.uploadInfo.province=e.checkArr[0],this.uploadInfo.city=e.checkArr[1],this.uploadInfo.area=e.checkArr[2],this.uploadInfo.region=e.checkArr},getcode:function(e){var t=/^[1][3,4,5,7,8][0-9]{9}$/;if(t.test(this.uploadInfo.mobile)){var n=this,i=60,u=setInterval(function(){i--,0==i?(n.second="",clearInterval(u)):n.second=i},1e3),l=this;(0,o.ajax)({url:"user/sendUpgradeMembershipCode",data:{mobile:this.uploadInfo.mobile},success:function(e){"1"==e.data.status&&l.countdown()}})}else this.loading=!1,a.showModal({title:"错误",content:"请输入正确的手机号"})},codeChange:function(e){var t=e.currentTarget.dataset.type;this.setData(i({},t,e.detail.value))},countdown:function(){var e=this,t=e.second;0==t&&(this.selected=!1,this.selected1=!0,this.second=60,this.nullHouse1=!1,this.nullHouse2=!0);setTimeout(function(){this.second=t-1,this.nullHouse1=!0,this.nullHouse2=!1,e.countdown()},1e3)},inputChangeSchool:function(e){var t=e.currentTarget.dataset.type;this.setData(i({},t,e.detail.value))},inputChangeHome:function(e){var t=e.currentTarget.dataset.type;this.setData(i({},t,e.detail.value))},bindSchoolChange:function(e){var t=this,n=this.school;t.school[e.detail.value].id;this.school_index=Number(e.detail.value),this.uploadInfo.school=e.detail.value,this.mySchool=n[Number(e.detail.value)].school_name},toggleTab:function(){this.$refs.region.show()},writeSchool:function(e){this.setData({school_index:0,"uploadInfo.school":e.detail.value,mySchool:e.detail.value})}}};t.default=l}).call(this,n("0de9")["default"],n("6e42")["default"])},"7d20":function(e,t,n){"use strict";var a=n("81a3"),o=n.n(a);o.a},"81a3":function(e,t,n){},"8a0b":function(e,t,n){"use strict";(function(e){n("f9cd"),n("921b");a(n("66fd"));var t=a(n("9ccb"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"990e":function(e,t,n){"use strict";n.r(t);var a=n("22c5"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=o.a},"9ccb":function(e,t,n){"use strict";n.r(t);var a=n("217e"),o=n("990e");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("7d20");var u,l=n("f0c5"),c=Object(l["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);t["default"]=c.exports}},[["8a0b","common/runtime","common/vendor"]]]);