(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/brain/poetry/poetry"],{"076a":function(t,e,i){"use strict";var a,s=function(){var t=this,e=t.$createElement;t._self._c},n=[];i.d(e,"b",function(){return s}),i.d(e,"c",function(){return n}),i.d(e,"a",function(){return a})},"1eca":function(t,e,i){},4703:function(t,e,i){"use strict";i.r(e);var a=i("f616"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=s.a},"66e4":function(t,e,i){"use strict";i.r(e);var a=i("076a"),s=i("4703");for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i("f20e");var r,c=i("f0c5"),o=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=o.exports},c942:function(t,e,i){"use strict";(function(t){i("f9cd"),i("921b");a(i("66fd"));var e=a(i("66e4"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},f20e:function(t,e,i){"use strict";var a=i("1eca"),s=i.n(a);s.a},f616:function(t,e,i){"use strict";(function(t,a){function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t){return o(t)||c(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=i("ec2b");function d(t){if(Array.isArray(t))return n(new Set(t))}var h={data:function(){return{lastImg:"",is_last:!1,sequence:!1,succImg:"",failImg:"",limitImg:"",backGroundImg:"",c:"",pageId:0,levelList:[],counts:0,is_succ:!1,is_limit:!1,l:"",r:"",ansList:[],id:"",next_id:"",curTarL:"",curTarR:"",list:"",objs:{},ctx:"",beginX:0,beginY:0,endX:0,endY:0,topicLeft:[],topicRight:[],audio:"",action:{method:"pause"},is_p:!0,innerAudioContext:null,canvasWidth:"",canvasHeight:"",pagesize:12,page:1,is_canvas:!0,ids:"",nowPgae:1,startX:0,slider:!1,animationData:{},cardInfoList:[{name:1},{name:2},{name:3},{name:4}],toIndex:"",select:!1,backgroundImg:"",is_wrong:!1,currentId:"",isLevel:!1,ans:""}},components:{},props:{},onShow:function(){var t=wx.createCanvasContext("customCanvas");this.ctx=t},onLoad:function(t){this.getAudio(),this.backGroundImgFun(),this.succImgFun(),this.failImgFun(),this.limitImgFun(),this.lastImgFun(),t.is_share&&(this.toIndex=1);var e="",i="";wx.getSystemInfo({success:function(t){e=t.windowWidth-56,i=t.windowHeight-200}}),this.canvasWidth=e,this.canvasHeight=i,this.l="",this.r="",this.ansList=[],this.curTarL="",this.curTarR="",this.list="",this.objs={},this.beginX=0,this.beginY=0,this.endX=0,this.endY=0,this.topicList(),this.getLevel()},onShareAppMessage:function(){return{title:"发现一个很好玩的文字游戏，快来跟我一起玩吧！",path:"/pages/brain/poetry/poetry?is_share=1",success:function(t){}}},onHide:function(){this.innerAudioContext.pause()},onBackPress:function(){this.innerAudioContext.destroy(),this.innerAudioContext=null},methods:{beginCanvas:function(){var t=this;if(this.ansList.length>4)return!1;this.ctx.beginPath(),this.list.forEach(function(e,i){t.ctx.moveTo(e.beginX,e.beginY),t.ctx.lineTo(e.endX,e.endY)}),this.ctx.strokeStyle="#F9D322",this.ctx.stroke(),this.ctx.draw(),4==this.ansList.length&&this.answer()},setData:function(t){for(var e in t){var i=t[e];this[e]=i}},clickLeft:function(t){var e=this;this.beginX=0,this.beginY=t.currentTarget.offsetTop,this.l=t.currentTarget.dataset.name;var i=t.currentTarget.dataset.index,a=t.currentTarget.dataset.select,s=e.topicLeft,n=this.ansList;if(0==n.length&&(s.forEach(function(t,e){t.select=!1}),e.topicLeft=s),0==a)if(n.forEach(function(i,a){if(i[0]!=t.currentTarget.dataset.k){var s=e.topicLeft;s.forEach(function(t,e){i[0]!=t.key&&(t.select=!1)}),e.topicLeft=s}}),this.curTarL==t.currentTarget.dataset.k){var r="topicLeft["+i+"].select";e[r]=!0}else{var c="topicLeft["+i+"].select";e[c]=!s[i].select}else{var o=!1;if(n.forEach(function(e,i){e[0]==t.currentTarget.dataset.k&&(o=!0)}),0!=o){var u="topicLeft["+i+"].select";return void(e[u]=!0)}var h="topicLeft["+i+"].select";e[h]=!s[i].select}if(this.curTarR===t.currentTarget.dataset.k){var g=[];g.push({beginX:this.beginX,beginY:this.beginY,endX:this.endX,endY:this.endY});var f=t.currentTarget.dataset.k+""+this.r,l=[];l.push(f),this.list=g.concat(this.list),this.ansList=l.concat(this.ansList),l=d(this.ansList),this.ansList=l,this.beginCanvas()}this.curTarL=t.currentTarget.dataset.k},clickRight:function(t){var e=this,i=t.currentTarget.dataset.index,a=t.currentTarget.dataset.select,n=e.topicRight,r=this.ansList;if(0==r.length&&(n.forEach(function(t,e){t.select=!1}),e.setData({topicRight:n})),0==a)if(r.forEach(function(i,a){if(i[0]!=t.currentTarget.dataset.k){var s=e.topicRight;s.forEach(function(t,e){i[0]!=t.key&&(t.select=!1)}),e.setData({topicRight:s})}}),this.curTarL==t.currentTarget.dataset.k){var c="topicRight["+i+"].select";e.setData(s({},c,!0))}else{var o="topicRight["+i+"].select";e.setData(s({},o,!n[i].select))}else{var u=!1;if(r.forEach(function(e,i){e[0]==t.currentTarget.dataset.k&&(u=!0)}),0!=u){var h="topicRight["+i+"].select";return void e.setData(s({},h,!0))}var g="topicRight["+i+"].select";e.setData(s({},g,!n[i].select))}if(this.setData({endX:t.currentTarget.offsetLeft-70,endY:t.currentTarget.offsetTop,r:t.currentTarget.dataset.name}),this.curTarL===t.currentTarget.dataset.k){var f=[];f.push({beginX:this.beginX,beginY:this.beginY,endX:this.endX,endY:this.endY});var l=this.l+""+t.currentTarget.dataset.k,p=[];p.push(l),this.setData({list:f.concat(this.list),ansList:p.concat(this.ansList)}),p=d(this.ansList),this.setData({ansList:p}),this.beginCanvas()}this.setData({curTarR:t.currentTarget.dataset.k})},backGroundImgFun:function(){var t=this;u.ajaxs("index/getSystem",{type:9},function(e){t.setData({backgroundImg:e.data})})},reset:function(t){t.currentTarget.dataset.id;this.topicList(),this.setData({is_wrong:!1,currentId:"-1",is_succ:!1}),this.ctx.draw()},exit:function(){wx.navigateBack({delta:1})},topicList:function(){var t=this;wx.getStorageSync("game-pid")&&this.setData({id:wx.getStorageSync("game-pid")});var e={id:t.id};u.ajaxs("game/ligature",e,function(e){if(2!=e.status){if(3==e.status)return t.setData({sequence:!0,id:t.ids}),setTimeout(function(){t.setData({sequence:!1})},2e3),void wx.setStorageSync("game-pid",t.id);1==e.status&&(t.setData({topicLeft:e.data.arr1,next_id:e.data.next_id,topicRight:e.data.arr2,id:e.data.id,ids:e.data.id}),wx.setStorageSync("game-pid",e.data.id))}else{if("今日答题数量已达上限"==e.msg)return void t.setData({is_limit:!0});wx.showToast({title:e.msg,icon:"none",mask:!0});var i=getCurrentPages();i[i.length-2];setTimeout(function(){wx.navigateBack({delta:1})},1e3)}})},answer:function(){var t=this,e=this,i={is_canvas:!1,id:this.id,answer:e.ansList};u.ajaxs("game/ligatureAnswer",i,function(i){1==i.status?(e.setData({is_succ:!0}),e.setData({l:"",r:"",ansList:[],curTarL:"",curTarR:"",list:"",objs:{},beginX:0,beginY:0,endX:0,endY:0}),t.ctx.draw()):(e.setData({is_wrong:!0,l:"",r:"",ansList:[],curTarL:"",curTarR:"",list:"",objs:{},beginX:0,beginY:0,endX:0,endY:0}),t.ctx.draw())})},getLevel:function(){var t=this,e={type:3,page:this.page,page_size:this.pagesize};u.ajaxs("game/guanqia",e,function(e){var i=[];if(1==e.status){t.setData({levelList:e.data.list});for(var a=0;a<e.data.count;a++)i.push(a+1);t.setData({counts:i,c:e.data.count})}})},closeLevel:function(){this.setData({isLevel:!1,is_canvas:!0,list:[],ansList:[],curTarL:"",curTarR:"",objs:{},beginX:0,beginY:0,endX:0,endY:0}),this.topicList(),this.ctx.draw()},showLevel:function(){this.setData({isLevel:!0,is_canvas:!1}),this.getLevel()},toDetail:function(t){this.setData({id:t.currentTarget.dataset.id,isLevel:!1,ans:"",currentId:"-1",list:[],ansList:[],curTarL:"",curTarR:"",objs:{},beginX:0,beginY:0,endX:0,endY:0,is_canvas:!0}),wx.setStorageSync("game-pid",t.currentTarget.dataset.id),this.topicList(),this.ctx.draw()},next:function(){if(0==this.next_id)return this.setData({is_succ:!1,is_last:!0}),!1;this.setData({id:this.next_id}),wx.setStorageSync("game-pid",this.id),this.topicList(),this.setData({is_succ:!1,ans:"",currentId:"-1",list:[],ansList:[],curTarL:"",curTarR:"",objs:{},beginX:0,beginY:0,endX:0,endY:0}),this.ctx.draw()},toGetLevel:function(t){var e=t.currentTarget.dataset.index;this.setData({page:t.currentTarget.dataset.page,pageId:e}),this.getLevel()},pause:function(){this.$audio.pause()},initAudio:function(){if(null==this.innerAudioContext){var e=t.createInnerAudioContext();e.autoplay=!0,e.loop=!0,e.src=this.audio,e.onCanplay(function(){a("log","可以播放"," at pages\\brain\\poetry\\poetry.vue:826")}),this.innerAudioContext=e}else this.is_p&&this.innerAudioContext.play()},playorpause:function(t){var e=this;this.innerAudioContext.paused?(e.is_p=!0,this.innerAudioContext.play()):(e.is_p=!1,this.innerAudioContext.pause())},getAudio:function(){var e=this;u.ajax({url:"index/getSystem",data:{type:8},success:function(i){t.hideLoading(),e.audio=i.data,e.initAudio()}})},goBack:function(){var t=this,e={method:"pause"};t.setData({action:e,is_p:!1}),1==this.toIndex?wx.switchTab({url:"/pages/index/index"}):wx.navigateBack({delta:1})},touchstart:function(t){this.setData({startX:t.changedTouches[0].clientX})},touchend:function(t){var e=this.startX,i=t.changedTouches[0].clientX;if(e-i>30){if(this.setData({slider:!0}),this.page==this.c)return void this.setData({slider:!1});this.setData({page:this.page+1,pageId:this.pageId+1}),this.getLevel()}if(i-e>30){if(this.setData({slider:!0}),1==this.page)return void this.setData({slider:!1});this.setData({page:this.page-1,pageId:this.pageId-1}),this.getLevel()}},nextPage:function(){this.page!=this.c&&(this.setData({page:this.page+1,pageId:this.pageId+1}),this.getLevel())},prevPage:function(){1!=this.page&&(this.setData({page:this.page-1,pageId:this.pageId-1}),this.getLevel())},failImgFun:function(){var t=this;u.ajaxs("index/getSystem",{type:11},function(e){t.failImg=e.data})},succImgFun:function(){var t=this;u.ajaxs("index/getSystem",{type:10},function(e){t.succImg=e.data})},limitImgFun:function(){var t=this;u.ajaxs("index/getSystem",{type:12},function(e){t.limitImg=e.data})},lastImgFun:function(){var t=this;u.ajaxs("index/getSystem",{type:13},function(e){t.lastImg=e.data})}}};e.default=h}).call(this,i("6e42")["default"],i("0de9")["default"])}},[["c942","common/runtime","common/vendor"]]]);