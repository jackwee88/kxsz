(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/brain/poetry/poetry"],{"1eca":function(t,e,a){},4703:function(t,e,a){"use strict";a.r(e);var i=a("f616"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=s.a},4785:function(t,e,a){"use strict";var i,s=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"b",function(){return s}),a.d(e,"c",function(){return n}),a.d(e,"a",function(){return i})},"66e4":function(t,e,a){"use strict";a.r(e);var i=a("4785"),s=a("4703");for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);a("f20e");var r,c=a("f0c5"),o=Object(c["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=o.exports},c942:function(t,e,a){"use strict";(function(t){a("f9cd"),a("921b");i(a("66fd"));var e=i(a("66e4"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},f20e:function(t,e,a){"use strict";var i=a("1eca"),s=a.n(i);s.a},f616:function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function s(t){return c(t)||r(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a("ec2b");function u(t){if(Array.isArray(t))return s(new Set(t))}var h={data:function(){return{lastImg:"",is_last:!1,sequence:!1,succImg:"",failImg:"",limitImg:"",backGroundImg:"",c:"",pageId:0,levelList:[],counts:0,is_succ:!1,is_limit:!1,l:"",r:"",ansList:[],id:"",next_id:"",curTarL:"",curTarR:"",list:"",objs:{},ctx:"",beginX:0,beginY:0,endX:0,endY:0,topicLeft:[],topicRight:[],audio:"",action:{method:"pause"},is_p:!1,canvasWidth:"",canvasHeight:"",pagesize:12,page:1,is_canvas:!0,ids:"",nowPgae:1,startX:0,slider:!1,animationData:{},cardInfoList:[{name:1},{name:2},{name:3},{name:4}],toIndex:"",select:!1,backgroundImg:"",is_wrong:!1,currentId:"",isLevel:!1,ans:""}},components:{},props:{},onShow:function(){var t=wx.createCanvasContext("customCanvas");this.ctx=t},onLoad:function(t){this.getAudio(),this.playorpause(),this.backGroundImgFun(),this.succImgFun(),this.failImgFun(),this.limitImgFun(),this.lastImgFun(),t.is_share&&(this.toIndex=1);var e="",a="";wx.getSystemInfo({success:function(t){e=t.windowWidth-56,a=t.windowHeight-200}}),this.canvasWidth=e,this.canvasHeight=a,this.l="",this.r="",this.ansList=[],this.curTarL="",this.curTarR="",this.list="",this.objs={},this.beginX=0,this.beginY=0,this.endX=0,this.endY=0,this.topicList(),this.getLevel()},onShareAppMessage:function(){return{title:"发现一个很好玩的文字游戏，快来跟我一起玩吧！",path:"/pages/brain/poetry/poetry?is_share=1",success:function(t){}}},methods:{beginCanvas:function(){var t=this;if(this.ansList.length>4)return!1;this.ctx.beginPath(),this.list.forEach(function(e,a){t.ctx.moveTo(e.beginX,e.beginY),t.ctx.lineTo(e.endX,e.endY)}),this.ctx.strokeStyle="#F9D322",this.ctx.stroke(),this.ctx.draw(),4==this.ansList.length&&this.answer()},setData:function(t){for(var e in t){var a=t[e];this[e]=a}},clickLeft:function(t){var e=this;this.beginX=0,this.beginY=t.currentTarget.offsetTop,this.l=t.currentTarget.dataset.name;var a=t.currentTarget.dataset.index,i=t.currentTarget.dataset.select,s=e.topicLeft,n=this.ansList;if(0==n.length&&(s.forEach(function(t,e){t.select=!1}),e.topicLeft=s),0==i)if(n.forEach(function(a,i){if(a[0]!=t.currentTarget.dataset.k){var s=e.topicLeft;s.forEach(function(t,e){a[0]!=t.key&&(t.select=!1)}),e.topicLeft=s}}),this.curTarL==t.currentTarget.dataset.k){var r="topicLeft["+a+"].select";e[r]=!0}else{var c="topicLeft["+a+"].select";e[c]=!s[a].select}else{var o=!1;if(n.forEach(function(e,a){e[0]==t.currentTarget.dataset.k&&(o=!0)}),0!=o){var h="topicLeft["+a+"].select";return void(e[h]=!0)}var d="topicLeft["+a+"].select";e[d]=!s[a].select}if(this.curTarR===t.currentTarget.dataset.k){var g=[];g.push({beginX:this.beginX,beginY:this.beginY,endX:this.endX,endY:this.endY});var f=t.currentTarget.dataset.k+""+this.r,l=[];l.push(f),this.list=g.concat(this.list),this.ansList=l.concat(this.ansList),l=u(this.ansList),this.ansList=l,this.beginCanvas()}this.curTarL=t.currentTarget.dataset.k},clickRight:function(t){var e=this,a=t.currentTarget.dataset.index,s=t.currentTarget.dataset.select,n=e.topicRight,r=this.ansList;if(0==r.length&&(n.forEach(function(t,e){t.select=!1}),e.setData({topicRight:n})),0==s)if(r.forEach(function(a,i){if(a[0]!=t.currentTarget.dataset.k){var s=e.topicRight;s.forEach(function(t,e){a[0]!=t.key&&(t.select=!1)}),e.setData({topicRight:s})}}),this.curTarL==t.currentTarget.dataset.k){var c="topicRight["+a+"].select";e.setData(i({},c,!0))}else{var o="topicRight["+a+"].select";e.setData(i({},o,!n[a].select))}else{var h=!1;if(r.forEach(function(e,a){e[0]==t.currentTarget.dataset.k&&(h=!0)}),0!=h){var d="topicRight["+a+"].select";return void e.setData(i({},d,!0))}var g="topicRight["+a+"].select";e.setData(i({},g,!n[a].select))}if(this.setData({endX:t.currentTarget.offsetLeft-70,endY:t.currentTarget.offsetTop,r:t.currentTarget.dataset.name}),this.curTarL===t.currentTarget.dataset.k){var f=[];f.push({beginX:this.beginX,beginY:this.beginY,endX:this.endX,endY:this.endY});var l=this.l+""+t.currentTarget.dataset.k,p=[];p.push(l),this.setData({list:f.concat(this.list),ansList:p.concat(this.ansList)}),p=u(this.ansList),this.setData({ansList:p}),this.beginCanvas()}this.setData({curTarR:t.currentTarget.dataset.k})},backGroundImgFun:function(){var t=this;o.ajaxs("index/getSystem",{type:9},function(e){t.setData({backgroundImg:e.data})})},reset:function(t){t.currentTarget.dataset.id;this.topicList(),this.setData({is_wrong:!1,currentId:"-1",is_succ:!1}),this.ctx.draw()},exit:function(){wx.navigateBack({delta:1})},topicList:function(){var t=this;wx.getStorageSync("game-pid")&&this.setData({id:wx.getStorageSync("game-pid")});var e={id:t.id};o.ajaxs("game/ligature",e,function(e){if(2!=e.status){if(3==e.status)return t.setData({sequence:!0,id:t.ids}),setTimeout(function(){t.setData({sequence:!1})},2e3),void wx.setStorageSync("game-pid",t.id);1==e.status&&(t.setData({topicLeft:e.data.arr1,next_id:e.data.next_id,topicRight:e.data.arr2,id:e.data.id,ids:e.data.id}),wx.setStorageSync("game-pid",e.data.id))}else{if("今日答题数量已达上限"==e.msg)return void t.setData({is_limit:!0});wx.showToast({title:e.msg,icon:"none",mask:!0});var a=getCurrentPages();a[a.length-2];setTimeout(function(){wx.navigateBack({delta:1})},1e3)}})},answer:function(){var t=this,e=this,a={is_canvas:!1,id:this.id,answer:e.ansList};o.ajaxs("game/ligatureAnswer",a,function(a){1==a.status?(e.setData({is_succ:!0}),e.setData({l:"",r:"",ansList:[],curTarL:"",curTarR:"",list:"",objs:{},beginX:0,beginY:0,endX:0,endY:0}),t.ctx.draw()):(e.setData({is_wrong:!0,l:"",r:"",ansList:[],curTarL:"",curTarR:"",list:"",objs:{},beginX:0,beginY:0,endX:0,endY:0}),t.ctx.draw())})},getLevel:function(){var t=this,e={type:3,page:this.page,page_size:this.pagesize};o.ajaxs("game/guanqia",e,function(e){var a=[];if(1==e.status){t.setData({levelList:e.data.list});for(var i=0;i<e.data.count;i++)a.push(i+1);t.setData({counts:a,c:e.data.count})}})},closeLevel:function(){this.setData({isLevel:!1,is_canvas:!0,list:[],ansList:[],curTarL:"",curTarR:"",objs:{},beginX:0,beginY:0,endX:0,endY:0}),this.topicList(),this.ctx.draw()},showLevel:function(){this.setData({isLevel:!0,is_canvas:!1}),this.getLevel()},toDetail:function(t){this.setData({id:t.currentTarget.dataset.id,isLevel:!1,ans:"",currentId:"-1",list:[],ansList:[],curTarL:"",curTarR:"",objs:{},beginX:0,beginY:0,endX:0,endY:0,is_canvas:!0}),wx.setStorageSync("game-pid",t.currentTarget.dataset.id),this.topicList(),this.ctx.draw()},next:function(){if(0==this.next_id)return this.setData({is_succ:!1,is_last:!0}),!1;this.setData({id:this.next_id}),wx.setStorageSync("game-pid",this.id),this.topicList(),this.setData({is_succ:!1,ans:"",currentId:"-1",list:[],ansList:[],curTarL:"",curTarR:"",objs:{},beginX:0,beginY:0,endX:0,endY:0}),this.ctx.draw()},toGetLevel:function(t){var e=t.currentTarget.dataset.index;this.setData({page:t.currentTarget.dataset.page,pageId:e}),this.getLevel()},getAudio:function(){var t=this;wx.request({url:"index/getSystem",method:"post",data:{type:8},header:{"content-type":"application/json",token:wx.getStorageSync("token")},success:function(e){wx.hideLoading(),t.setData({audio:e.data.data})},fail:function(){wx.hideLoading(),wx.showModal({title:"网络错误",content:"网络出错，请刷新重试",showCancel:!1,mask:!0})}})},playorpause:function(t){var e=this,a={method:"play"},i={method:"pause"};"pause"==e.action.method?e.setData({action:a,is_p:!0}):e.setData({action:i,is_p:!1})},goBack:function(){var t=this,e={method:"pause"};t.setData({action:e,is_p:!1}),1==this.toIndex?wx.switchTab({url:"/pages/index/index"}):wx.navigateBack({delta:1})},touchstart:function(t){this.setData({startX:t.changedTouches[0].clientX})},touchend:function(t){var e=this.startX,a=t.changedTouches[0].clientX;if(e-a>30){if(this.setData({slider:!0}),this.page==this.c)return void this.setData({slider:!1});this.setData({page:this.page+1,pageId:this.pageId+1}),this.getLevel()}if(a-e>30){if(this.setData({slider:!0}),1==this.page)return void this.setData({slider:!1});this.setData({page:this.page-1,pageId:this.pageId-1}),this.getLevel()}},nextPage:function(){this.page!=this.c&&(this.setData({page:this.page+1,pageId:this.pageId+1}),this.getLevel())},prevPage:function(){1!=this.page&&(this.setData({page:this.page-1,pageId:this.pageId-1}),this.getLevel())},failImgFun:function(){var t=this;o.ajaxs("index/getSystem",{type:11},function(e){t.failImg=e.data})},succImgFun:function(){var t=this;o.ajaxs("index/getSystem",{type:10},function(e){t.succImg=e.data})},limitImgFun:function(){var t=this;o.ajaxs("index/getSystem",{type:12},function(e){t.limitImg=e.data})},lastImgFun:function(){var t=this;o.ajaxs("index/getSystem",{type:13},function(e){t.lastImg=e.data})}}};e.default=h}},[["c942","common/runtime","common/vendor"]]]);