(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/onlinestore/myScoreOrder/myScoreOrder"],{"5bba":function(e,t,a){"use strict";var r=a("a4e9"),n=a.n(r);n.a},"627a":function(e,t,a){"use strict";var r,n=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",function(){return n}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return r})},"786a":function(e,t,a){"use strict";(function(e){a("f9cd"),a("921b");r(a("66fd"));var t=r(a("db20"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},a4e9:function(e,t,a){},cecb:function(e,t,a){"use strict";a.r(t);var r=a("ddeb"),n=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,function(){return r[e]})}(o);t["default"]=n.a},db20:function(e,t,a){"use strict";a.r(t);var r=a("627a"),n=a("cecb");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("5bba");var i,c=a("f0c5"),d=Object(c["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);t["default"]=d.exports},ddeb:function(e,t,a){"use strict";(function(e){function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("ec2b"),o={data:function(){var e;return e={currentId:"1",refreshId:"a",section:[{name:"全部",typeId:"0"},{name:"待付款",typeId:"1"},{name:"待发货",typeId:"2"},{name:"待收货",typeId:"3"},{name:"待评价",typeId:"6"}],tabcontitem:[]},r(e,"currentId",0),r(e,"page",1),r(e,"page_size",10),r(e,"count",0),e},components:{},props:{},onLoad:function(e){var t=this;e.currentId&&t.setData({currentId:e.currentId,page:1});t.currentId;t.getData()},onReady:function(){},onShow:function(){var t=this;"a"!=t.refreshId&&wx.getStorage({key:"refreshIds",success:function(a){e("log",a," at pages\\onlinestore\\myScoreOrder\\myScoreOrder.vue:136"),1==a.data&&t.deleteList()}})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){var e=this;e.setData({page:1}),e.getData()},onShareAppMessage:function(){return{title:"开心书写",path:"pages/index/index?myshare=1&tourl=/pages/onlinestore/myOrder/myOrder"}},onReachBottom:function(){var e=this;e.getDataBott()},methods:{handleTap:function(e){var t=this,a=e.currentTarget.dataset.currentid;a&&(t.setData({currentId:a,page:1,tabcontitem:[],count:1}),t.getData())},getData:function(){var e=this,t={page:e.page,page_size:e.page_size,type:e.currentId};e.studylist;n.ajax("/api/order/orderList",t,function(t){var a=e.tabcontitem;e.setData({page:e.page+1,count:t.data.count>1?t.data.count:1,tabcontitem:a.concat(t.data.list)}),wx.stopPullDownRefresh()})},getDataBott:function(){var e=this,t={page:e.page,page_size:e.page_size,type:e.currentId};e.studylist;e.count<e.page?wx.showToast({title:"暂无更多信息",icon:"none"}):n.ajax("/api/order/orderList",t,function(t){var a=e.tabcontitem;e.setData({page:e.page+1,count:t.data.count>1?t.data.count:1,tabcontitem:a.concat(t.data.list)}),wx.stopPullDownRefresh()})},cancle:function(e){var t=this;t.tabcontitem;wx.showModal({title:"提示",content:"是否确认取消订单",success:function(a){if(a.confirm){var r=e.currentTarget.dataset.order_id,o=(e.currentTarget.dataset.index,{order_id:r});n.ajax("/api/order/cancle",o,function(e){wx.showToast({title:e.msg,icon:"none",mask:!0}),t.setData({tabcontitem:[],currentId:0,page:1,page_size:10}),t.getData()})}}})},pay:function(t){t.currentTarget.dataset.order_id;wx.showModal({title:"提示",content:"是否确认付款",success:function(a){if(a.confirm){var r=t.currentTarget.dataset.order_id,o=(t.currentTarget.dataset.index,{order_id:r});n.ajax("/api/paygoods/repay",o,function(a){e("log",a.data," at pages\\onlinestore\\myScoreOrder\\myScoreOrder.vue:316"),wx.requestPayment({timeStamp:String(a.data.timeStamp),nonceStr:a.data.nonceStr,package:a.data.package,signType:a.data.signType,paySign:a.data.paySign,success:function(a){e("log",a," at pages\\onlinestore\\myScoreOrder\\myScoreOrder.vue:324"),wx.redirectTo({url:"/pages/onlinestore/orderdetails/orderdetails?order_id="+t.currentTarget.dataset.order_id})},fail:function(){},complete:function(){}})})}}})},reminder:function(t){wx.showModal({title:"提示",content:"是否确认催单",success:function(a){if(a.confirm){var r=t.currentTarget.dataset.order_id,o=(t.currentTarget.dataset.index,{order_id:r});n.ajax("/api/order/reminder",o,function(t){e("log",t.data," at pages\\onlinestore\\myScoreOrder\\myScoreOrder.vue:366"),wx.showToast({title:"催单成功",mask:!0})})}else a.cancel&&e("log","用户点击取消"," at pages\\onlinestore\\myScoreOrder\\myScoreOrder.vue:373")}})},returnFun:function(e){e.currentTarget.dataset.order_id;var t=this;wx.showModal({title:"提示",content:"是否确认退货",success:function(a){if(a.confirm){var r=e.currentTarget.dataset.order_id,o=(e.currentTarget.dataset.index,{order_id:r});n.ajax("/api/order/returnGoods",o,function(e){wx.showToast({title:e.msg,icon:"none"}),t.setData({currentId:4,tabcontitem:[],page:1,page_size:10}),t.getData()})}}})},confirm:function(e){var t=this,a=(e.currentTarget.dataset.order_id,t.tabcontitem);wx.showModal({title:"提示",content:"是否确认收货",success:function(r){if(r.confirm){var o=e.currentTarget.dataset.order_id,i=e.currentTarget.dataset.index,c={order_id:o};n.ajax("/api/order/sure_goods",c,function(e){wx.showToast({title:"收货成功",icon:"none",mask:!0}),t.setData({currentId:3,tabcontitem:[],page:1,page_size:10}),a[i].is_refund,t.getData()})}}})},deleteFun:function(t){var a=this,r=a.tabcontitem;wx.showModal({title:"提示",content:"是否删除订单",success:function(o){if(o.confirm){var i=t.currentTarget.dataset.order_id,c=t.currentTarget.dataset.index,d={order_id:i};n.ajax("/api/order/del",d,function(t){e("log",t.data," at pages\\onlinestore\\myScoreOrder\\myScoreOrder.vue:484"),wx.showToast({title:"删除成功",mask:!0}),r.splice(c,1),a.setData({tabcontitem:r})})}}})},orderDetails:function(e){var t=e.currentTarget.dataset.order_id;t&&wx.navigateTo({url:"/pages/onlinestore/orderdetails/orderdetails?order_id="+t})},toTop:function(e){var t=this;t.pageScrollTo({scrollTop:0,duration:0})},addComment:function(e){var t=e.currentTarget.dataset.order_id;this.setData({refreshId:e.currentTarget.dataset.index}),wx.navigateTo({url:"/pages/addComment/addComment?order_id="+t})},deleteList:function(){var e=this,t=e.tabcontitem;t.splice(e.refreshId,1),e.setData({tabcontitem:t,refreshId:"a"}),wx.setStorage({key:"refreshIds",data:"0"})}}};t.default=o}).call(this,a("0de9")["default"])}},[["786a","common/runtime","common/vendor"]]]);