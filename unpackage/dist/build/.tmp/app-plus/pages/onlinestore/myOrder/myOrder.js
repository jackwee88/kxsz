(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/onlinestore/myOrder/myOrder"],{"1b3a":function(t,e,a){"use strict";var r,n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return r})},"5ad9":function(t,e,a){},"773f":function(t,e,a){"use strict";(function(t){a("f9cd"),a("921b");r(a("66fd"));var e=r(a("f07a"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},c0cb:function(t,e,a){"use strict";a.r(e);var r=a("fb54"),n=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,function(){return r[t]})}(o);e["default"]=n.a},d112:function(t,e,a){"use strict";var r=a("5ad9"),n=a.n(r);n.a},f07a:function(t,e,a){"use strict";a.r(e);var r=a("1b3a"),n=a("c0cb");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("d112");var i,d=a("f0c5"),s=Object(d["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);e["default"]=s.exports},fb54:function(t,e,a){"use strict";(function(t){function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("ec2b"),o={data:function(){var t;return t={currentId:"1",refreshId:"a",section:[{name:"全部",typeId:"0"},{name:"待付款",typeId:"1"},{name:"待发货",typeId:"2"},{name:"待收货",typeId:"3"},{name:"待评价",typeId:"6"}],tabcontitem:[]},r(t,"currentId",0),r(t,"page",1),r(t,"page_size",10),r(t,"count",0),t},components:{},props:{},onLoad:function(t){var e=this;t.currentId&&e.setData({currentId:t.currentId,page:1});e.currentId;e.getData()},onReady:function(){},onShow:function(){var e=this;"a"!=e.refreshId&&wx.getStorage({key:"refreshIds",success:function(a){t("log",a," at pages\\onlinestore\\myOrder\\myOrder.vue:142"),1==a.data&&e.deleteList()}})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){var t=this;t.setData({page:1}),t.getData()},onShareAppMessage:function(){return{title:"开心书写",path:"pages/index/index?myshare=1&tourl=/pages/onlinestore/myOrder/myOrder"}},onReachBottom:function(){var t=this;t.getDataBott()},methods:{setData:function(t){for(var e in t){var a=t[e];this[e]=a}},handleTap:function(t){var e=this,a=t.currentTarget.dataset.currentid;a&&(e.setData({currentId:a,page:1,tabcontitem:[],count:1}),e.getData())},getData:function(){var t=this,e={page:t.page,page_size:t.page_size,type:t.currentId};t.studylist;n.ajaxs("order/orderList",e,function(e){var a=t.tabcontitem;t.setData({page:t.page+1,count:e.data.count>1?e.data.count:1,tabcontitem:a.concat(e.data.list)}),wx.stopPullDownRefresh()})},getDataBott:function(){var t=this,e={page:t.page,page_size:t.page_size,type:t.currentId};t.studylist;t.count<t.page?wx.showToast({title:"暂无更多信息",icon:"none"}):n.ajaxs("order/orderList",e,function(e){var a=t.tabcontitem;t.setData({page:t.page+1,count:e.data.count>1?e.data.count:1,tabcontitem:a.concat(e.data.list)}),wx.stopPullDownRefresh()})},cancle:function(t){var e=this;e.tabcontitem;wx.showModal({title:"提示",content:"是否确认取消订单",success:function(a){if(a.confirm){var r=t.currentTarget.dataset.order_id,o=(t.currentTarget.dataset.index,{order_id:r});n.ajaxs("order/cancle",o,function(t){wx.showToast({title:t.msg,icon:"none",mask:!0}),e.setData({tabcontitem:[],currentId:0,page:1,page_size:10}),e.getData()})}}})},pay:function(e){e.currentTarget.dataset.order_id;wx.showModal({title:"提示",content:"是否确认付款",success:function(a){if(a.confirm){var r=e.currentTarget.dataset.order_id,o=(e.currentTarget.dataset.index,{order_id:r});n.ajaxs("paygoods/repay",o,function(a){t("log",a.data," at pages\\onlinestore\\myOrder\\myOrder.vue:328"),wx.requestPayment({timeStamp:String(a.data.timeStamp),nonceStr:a.data.nonceStr,package:a.data.package,signType:a.data.signType,paySign:a.data.paySign,success:function(a){t("log",a," at pages\\onlinestore\\myOrder\\myOrder.vue:336"),wx.redirectTo({url:"/pages/onlinestore/orderdetails/orderdetails?order_id="+e.currentTarget.dataset.order_id})},fail:function(){},complete:function(){}})})}}})},reminder:function(e){wx.showModal({title:"提示",content:"是否确认催单",success:function(a){if(a.confirm){var r=e.currentTarget.dataset.order_id,o=(e.currentTarget.dataset.index,{order_id:r});n.ajaxs("order/reminder",o,function(e){t("log",e.data," at pages\\onlinestore\\myOrder\\myOrder.vue:378"),wx.showToast({title:"催单成功",mask:!0})})}else a.cancel&&t("log","用户点击取消"," at pages\\onlinestore\\myOrder\\myOrder.vue:385")}})},returnFun:function(t){t.currentTarget.dataset.order_id;var e=this;wx.showModal({title:"提示",content:"是否确认退货",success:function(a){if(a.confirm){var r=t.currentTarget.dataset.order_id,o=(t.currentTarget.dataset.index,{order_id:r});n.ajaxs("order/returnGoods",o,function(t){wx.showToast({title:t.msg,icon:"none"}),e.setData({currentId:4,tabcontitem:[],page:1,page_size:10}),e.getData()})}}})},confirm:function(t){var e=this,a=(t.currentTarget.dataset.order_id,e.tabcontitem);wx.showModal({title:"提示",content:"是否确认收货",success:function(r){if(r.confirm){var o=t.currentTarget.dataset.order_id,i=t.currentTarget.dataset.index,d={order_id:o};n.ajaxs("order/sure_goods",d,function(t){wx.showToast({title:"收货成功",icon:"none",mask:!0}),e.setData({currentId:3,tabcontitem:[],page:1,page_size:10}),a[i].is_refund,e.getData()})}}})},deleteFun:function(e){var a=this,r=a.tabcontitem;wx.showModal({title:"提示",content:"是否删除订单",success:function(o){if(o.confirm){var i=e.currentTarget.dataset.order_id,d=e.currentTarget.dataset.index,s={order_id:i};n.ajaxs("order/del",s,function(e){t("log",e.data," at pages\\onlinestore\\myOrder\\myOrder.vue:496"),wx.showToast({title:"删除成功",mask:!0}),r.splice(d,1),a.setData({tabcontitem:r})})}}})},orderDetails:function(t){var e=t.currentTarget.dataset.order_id;e&&wx.navigateTo({url:"/pages/onlinestore/orderdetails/orderdetails?order_id="+e})},toTop:function(t){var e=this;e.pageScrollTo({scrollTop:0,duration:0})},addComment:function(t){var e=t.currentTarget.dataset.order_id;this.setData({refreshId:t.currentTarget.dataset.index}),wx.navigateTo({url:"/pages/addComment/addComment?order_id="+e})},deleteList:function(){var t=this,e=t.tabcontitem;e.splice(t.refreshId,1),t.setData({tabcontitem:e,refreshId:"a"}),wx.setStorage({key:"refreshIds",data:"0"})}}};e.default=o}).call(this,a("0de9")["default"])}},[["773f","common/runtime","common/vendor"]]]);