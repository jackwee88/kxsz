(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/studySquare/studySquare"],{1675:function(t,e,a){"use strict";a.r(e);var s=a("b5fc"),i=a.n(s);for(var u in s)"default"!==u&&function(t){a.d(e,t,function(){return s[t]})}(u);e["default"]=i.a},"33bc":function(t,e,a){"use strict";var s=a("3769"),i=a.n(s);i.a},3769:function(t,e,a){},"7b67":function(t,e,a){"use strict";(function(t){a("f9cd"),a("921b");s(a("66fd"));var e=s(a("cd74"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},a5df:function(t,e,a){"use strict";var s,i=function(){var t=this,e=t.$createElement;t._self._c},u=[];a.d(e,"b",function(){return i}),a.d(e,"c",function(){return u}),a.d(e,"a",function(){return s})},b5fc:function(t,e,a){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("60db"),u=n(a("ec2b"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o={data:function(){return{back:"",host:getApp().globalData.requestUrl,quanziText:"多读书 读好书",dakaNum:"180",studylist:[],show:!1,page:1,page_size:10,count:1,type:1,is_wait:"",comment_num:0,release:[{name:"1",textareaValue:"sfdf"}],smodel:"",wait:"",is_give:"",thumbs_times:"",releaseFocus:!1,releaseValue:"",item:"",indeNum:""}},components:{},props:{},onLoad:function(){this.getData();var t=getCurrentPages();t[t.length-2]},onPullDownRefresh:function(){var t=this;t.setData({page:1,studylist:[],count:1}),t.getData()},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onReachBottom:function(){var e=this;e.getData();var a={page:e.page,page_size:e.page_size,type:e.type};u.default.ajaxs("study/studyList",a,function(a){page<a.data.count?e.setData({studyList:e.studylist.concat(a.data.list),page:++page}):t.showToast({title:"到底了...",icon:"none"})})},onShareAppMessage:function(t){if("button"===t.from){var e=t.target.dataset.nickname,a=e+"的打卡日记",s=t.target.dataset.image,i=t.target.dataset.video;if(s)var u=s;else if(i)u=i+"?spm=a2c4g.11186623.2.1.yjOb8V&x-oss-process=video/snapshot,t_0000,f_jpg,w_800,h_600,m_fast";return{title:a,path:"/pages/myPublished/myPublished?dy_id="+t.target.dataset.dy_id+"&is_share=1",imageUrl:u,success:function(t){}}}return{title:"开心书写",path:"pages/index/index?myshare=1&tourl=/pages/studySquare/studySquare"}},methods:{setData:function(t){for(var e in t){var a=t[e];this[e]=a}},praise:function(e){var a=this,u=this,n=e.currentTarget.dataset.index,r=e.currentTarget.dataset.dy_id;s("log","123"+r," at pages\\studySquare\\studySquare.vue:416"),(0,i.ajax)({url:"study/praiseStudy",data:{dy_id:r},success:function(e){var s=u.studylist;1==e.data.data.is_ok?(a.studylist[n].is_give=!s[n].is_give,a.studylist[n].thumbs_times=s[n].thumbs_times+1,t.showToast({title:"点赞成功",icon:"none"})):(a.studylist[n].is_give=!s[n].is_give,a.studylist[n].thumbs_times=s[n].thumbs_times-1)}})},gotoPublished:function(e){s("log","this.type"+this.type," at pages\\studySquare\\studySquare.vue:445");var a={dy_id:e.currentTarget.dataset.dy_id,index:e.currentTarget.dataset.index,browse_times:e.currentTarget.dataset.browse_times,comment_count:e.currentTarget.dataset.comment_count,thumbs_times:e.currentTarget.dataset.thumbs_times,type:2};t.navigateTo({url:"../myPublished/myPublished?pulishedDetail="+encodeURIComponent(JSON.stringify(a))})},gotoUserInfo:function(e){s("log",e.currentTarget.dataset.uid+"123"," at pages\\studySquare\\studySquare.vue:461");var a={uid:e.currentTarget.dataset.uid};t.navigateTo({url:"../userInfo/otherInfo?infoDetail="+encodeURIComponent(JSON.stringify(a))})},getData:function(){var e=this;this.studylist;this.count<this.page?t.showToast({title:"暂无更多信息"}):(0,i.ajax)({url:"study/studyList",data:{page:this.page,page_size:this.page_size,type:this.type},success:function(t){s("log",t.data.data," at pages\\studySquare\\studySquare.vue:484");var a=t.data.data,i=a.list,u=a.count;e.studylist=i;for(var n={method:"pause"},r=0;r<i.length;r++)i[r].if_input=!1,i[r].fullScreen=!1,i[r].picture_arr.length>0&&(i[r].poster=i[r].picture_arr[0]),i[r].action=n,i[r].name=i[r].nickname+"的音频";e.page=e.page+1,e.count=u>1?t.data.count:1}})},showmore:function(){this.show?this.setData({show:!1}):this.setData({show:!0})},ifinput:function(t){var e=this,a=t.currentTarget.dataset.index,s=e.studylist;s[a].if_input=!s[a].if_input,e.setData({studylist:s})},formSubmit:function(t){if(s("log","form发生了submit事件，携带数据为：",t.detail.value," at pages\\studySquare\\studySquare.vue:534"),""==t.detail.value.input)wx.showToast({title:"请输入内容"});else{var e={},a=t.detail.value.input,i=this.release;i.length;e.textareaValue=a,i.push(e),this.setData({release:i,releaseFocus:!0,releaseValue:""}),s("log",i," at pages\\studySquare\\studySquare.vue:555")}},gotoGrowthDairy:function(e){var a=e.currentTarget.dataset.uid,s=e.currentTarget.dataset.pid,i=e.currentTarget.dataset.index,u=e.currentTarget.dataset.thumbs_times;getApp().globalData.preview=!1,t.navigateTo({url:"../growthDiary/growthDiary?uid="+a+"&pid="+s+"&index="+i+"&type=1&thumbs_times="+u})},changeOil:function(t){s("log",t.target.dataset.type," at pages\\studySquare\\studySquare.vue:570");var e=this;this.type=t.target.dataset.type,this.page=1,this.studylist=[],this.count=1,this.show=!1,e.getData()},toWhere:function(t){var e=t.currentTarget.dataset.url;wx.navigateTo({url:e})},getoShop:function(){var t=this;wx.request({url:getApp().globalData.requestUrl+"/api/index/storeStartPage",method:"post",data:"",header:{"content-type":"application/json",token:wx.getStorageSync("token")},success:function(e){t.setData({smodel:e.data.data.smodel,is_wait:1}),wx.navigateTo({url:"/pages/catalogues/catalogues"})},fail:function(){return wx.hideLoading(),wx.showModal({title:"网络错误",content:"网络出错，请刷新重试",showCancel:!1}),"function"==typeof cb&&cb(!1)}})},previewImg:function(t){var e=t.currentTarget.dataset.src,a=t.currentTarget.dataset.pic_arr,s=a.split(",");wx.previewImage({current:e,urls:s})},growthDaily:function(t){var e=t.currentTarget.dataset.uid,a=t.currentTarget.dataset.pid,s=t.currentTarget.dataset.index,i=t.currentTarget.dataset.thumbs_times;wx.navigateTo({url:"../myPublished/myPublished?uid="+e+"&pid="+a+"&index="+s+"&type=2&thumbs_times="+i})},playVideo:function(t){var e=t.currentTarget.dataset.src;wx.navigateTo({url:"../video/video?src="+e})},playorpause:function(t){var e=this,a=t.target.dataset.index,s="studylist["+a+"].action",i={method:"play"},u={method:"pause"};if("pause"==e.studylist[a].action.method){e.setData(r({},s,i));for(var n=0;n<e.studylist.length;n++)if(a!=n){var o="studylist["+n+"].action";e.setData(r({},o,u))}}else e.setData(r({},s,u))},toTop:function(t){var e=this;e.pageScrollTo({scrollTop:0,duration:0})}}};e.default=o}).call(this,a("6e42")["default"],a("0de9")["default"])},cd74:function(t,e,a){"use strict";a.r(e);var s=a("a5df"),i=a("1675");for(var u in i)"default"!==u&&function(t){a.d(e,t,function(){return i[t]})}(u);a("33bc");var n,r=a("f0c5"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"64293f77",null,!1,s["a"],n);e["default"]=o.exports}},[["7b67","common/runtime","common/vendor"]]]);