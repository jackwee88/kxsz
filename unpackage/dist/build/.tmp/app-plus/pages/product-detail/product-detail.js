(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product-detail/product-detail"],{"0738":function(t,e,a){"use strict";a.r(e);var i=a("c016"),s=a.n(i);for(var u in i)"default"!==u&&function(t){a.d(e,t,function(){return i[t]})}(u);e["default"]=s.a},"2d95":function(t,e,a){"use strict";a.r(e);var i=a("3996"),s=a("0738");for(var u in s)"default"!==u&&function(t){a.d(e,t,function(){return s[t]})}(u);a("945f");var n,o=a("f0c5"),l=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"e09a7d9a",null,!1,i["a"],n);e["default"]=l.exports},3996:function(t,e,a){"use strict";var i={"uni-countdown":()=>a.e("components/uni-countdown/uni-countdown").then(a.bind(null,"3f18"))},s=function(){var t=this,e=t.$createElement;t._self._c},u=[];a.d(e,"b",function(){return s}),a.d(e,"c",function(){return u}),a.d(e,"a",function(){return i})},"421f":function(t,e,a){},"945f":function(t,e,a){"use strict";var i=a("421f"),s=a.n(i);s.a},c016:function(t,e,a){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a("60db");function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var n=a("ec2b"),o={data:function(){return{evaluateList:"",detail:{},html:{},icon:{},p_id:0,is_share:"",collect_p:!1,buyQuantity:1,sku_arr:[],sku_show:!1,valueStr:"",valueStrNum:"",type:"",goods_spec_id:"",main_image:"",userName:"",attrValueList:"",swiperImages:[],productDetail:{},assemble:null,teamlist:[{name:"与女无瓜",num:"1"},{name:"与女无瓜",num:"1"}],pid:""}},onLoad:function(e){t("log",e," at pages\\product-detail\\product-detail.vue:272"),this.banner=JSON.parse(decodeURIComponent(e.productDetail)),this.pid=this.banner.id},onShareAppMessage:function(t){if("button"===t.from)var e=t.target.dataset.p_name;else e="开心书写";var a=this;return{title:e,path:"pages/onlinestore/productDetail/productDetail?is_share=1&p_id="+a.p_id,success:function(t){}}},onShow:function(){this.setData({sku_show:!1,valueStrNum:"",valueStr:""})},mounted:function(){var e=this;(0,s.ajax)({url:"goods/detail",data:{p_id:"1201"},method:"POST",success:function(a){if(t("log",a.data.data," at pages\\product-detail\\product-detail.vue:312"),a.data.data.coupon_price=a.data.data.spec?a.data.data.spec[0].goods_price:a.data.data.coupon_price,a.data.data.image=a.data.data.spec?a.data.data.spec[0].spec_image:a.data.data.image,e.detail=a.data.data,e.collect_p=a.data.data.if_collect,e.main_image=a.data.data.image,a.data.data.specData){var i=a.data.data.specData,s=i.spec_attr;i.spec_list;e.sku_arr=s}},error:function(){}}),(0,s.ajax)({url:"assemble/wait",method:"POST",data:{goods_id:"1072"},success:function(t){var a=t.data.data,i=(a.count,a.list);e.teamlist=i},error:function(){}})},methods:{assmbleDetail:function(){t("log",this.pid," at pages\\product-detail\\product-detail.vue:342"),i.navigateTo({url:"../assemble/assemble",success:function(t){},fail:function(){},complete:function(){}})},getEvaluateList:function(){var e=this,a={goods_id:e.p_id};n.ajax("/api/evaluate/getEvaluateList",a,function(a){if(t("log",a.data.total," at pages\\product-detail\\product-detail.vue:356"),e.setData({evaluateList:a.data}),0!=a.data.total){var i=a.data.list[0].nickname,s="evaluateList.list[0].nickname";if(1==i.length)e.setData(u({},s,"*"));else if(2==i.length){var n=i.slice(0,1);e.setData(u({},s,n+"*"))}else{var o=i.slice(0,1),l=i.slice(i.length-1,i.length);3==i.length?e.setData(u({},s,o+"*"+l)):e.setData(u({},s,o+"**"+l))}}})},add:function(t){var e=this,a={p_id:e.p_id,goods_num:e.buyQuantity,goods_sku_id:e.valueStrNum};(0,s.ajax)({url:"cart/add",data:{param:a},success:function(t){i.showToast({title:t.msg}),e.detail.specData&&e.closeSku()}})},showSku:function(e){this.sku_arr.length>0?(t("log",e.type," at pages\\product-detail\\product-detail.vue:419"),this.sku_show=!0,this.type=e.type):1==e.currentTarget.dataset.type?this.buyNow():this.add()},closeSku:function(){var t=this;this.sku_show=!1;var e=t.detail.specData.spec_attr;e.forEach(function(t){t.spec_items.forEach(function(t){t.selected=!1})}),t.setData({"detail.specData.spec_attr":e,sku_arr:e,valueStr:"","detail.coupon_price":t.detail.spec[0].goods_price,"detail.image":t.detail.spec[0].spec_image?t.detail.spec[0].spec_image:t.detail.image})},toTop:function(t){var e=this;e.pageScrollTo({scrollTop:0,duration:0})},lookMore:function(){var t=this;wx.navigateTo({url:"/pages/commentList/commentList?p_id="+t.p_id+"&collect_p="+t.collect_p})},distachAttrValue:function(t){for(var e=this.attrValueList,a=0;a<t.length;a++)for(var i=0;i<t[a].attrValueList.length;i++){var s=this.getAttrIndex(t[a].attrValueList[i].attrKey,e);s>=0?this.isValueExist(t[a].attrValueList[i].attrValue,e[s].attrValues)||e[s].attrValues.push(t[a].attrValueList[i].attrValue):e.push({attrKey:t[a].attrValueList[i].attrKey,attrValues:[t[a].attrValueList[i].attrValue]})}for(a=0;a<e.length;a++)for(i=0;i<e[a].attrValues.length;i++)e[a].attrValueStatus?e[a].attrValueStatus[i]=!0:(e[a].attrValueStatus=[],e[a].attrValueStatus[i]=!0);this.setData({attrValueList:e})},getAttrIndex:function(t,e){for(var a=0;a<e.length;a++)if(t==e[a].attrKey)break;return a<e.length?a:-1},isValueExist:function(t,e){for(var a=0;a<e.length;a++)if(e[a]==t)break;return a<e.length},submit:function(){for(var t=this,e=!1,a=0;a<this.detail.spec.length;a++)if(this.valueStrNum==this.detail.spec[a].spec_sku_id){this.setData({goods_spec_id:this.detail.spec[a].goods_spec_id}),e=!0;break}0!=e&&this.valueStr?1==t.type?t.buyNow():t.add():wx.showToast({title:"请选择完整的规格！",icon:"loading",duration:1e3})},collectP:function(t){var e=this;n.ajax("/api/goods/goodsCollect",{p_id:e.p_id},function(t){wx.showToast({title:t.msg,icon:"none",mask:!0}),e.setData({collect_p:!e.collect_p})})},goindex:function(){getApp().globalData.infoModel()},buyNow:function(){var t=this;(0,s.ajax)({url:"/index/getProfile",data:{},success:function(e){var a=t;i.getStorageSync("loginToken")?(a.detail.specData&&a.closeSku(),i.navigateTo({url:"sureOrder/sureOrder?type=1&ids="+a.p_id+"&now_buy=1&goods_num="+a.buyQuantity+"&goods_sku_id="+a.valueStrNum+"&goods_spec_id="+a.goods_spec_id})):i.navigateTo({url:"../login/login"})}})},addCount:function(t){this.buyQuantity=parseInt(this.buyQuantity)+1},minusCount:function(t){this.buyQuantity<=1||(this.buyQuantity=parseInt(this.buyQuantity)-1)},changeNum:function(t){var e=this;e.setData({buyQuantity:t.detail.value})},selectAttrValue:function(t){var e=this.sku_arr,a=t.index,i=t.key,s=t.value,u=t.sec_index,n=t.item;this.selectValue(e,a,i,s,u,n)},selectValue:function(e,a,i,s,u,n){for(var o=0;o<e[a].spec_items.length;o++)e[a].selectedValue="",e[a].spec_items[o].item_id==n.item_id?e[a].spec_items[o].selected=!e[a].spec_items[o].selected:e[a].spec_items[o].selected=!1;e[a].selectedValue=s,this.setData({sku_arr:e});for(var l="",c="",r=0;r<e.length;r++)for(o=0;o<e[r].spec_items.length;o++)e[r].spec_items[o].selected&&(l+=e[r].selectedValue+",",c+=e[r].spec_items[o].item_id+"_");"_"==c.substr(c.length-1,c.length)&&(c=c.substr(0,c.length-1)),","==l.substr(l.length-1,l.length)&&(l=l.substr(0,l.length-1));var d=c.split("").reverse().join("");for(r=0;r<this.detail.spec.length;r++)c!=this.detail.spec[r].spec_sku_id&&d!=this.detail.spec[r].spec_sku_id||(this.detail.spec[r].spec_image?this.setData({"detail.image":this.detail.spec[r].spec_image}):this.setData({"detail.image":this.main_image}),this.setData({"detail.coupon_price":this.detail.spec[r].goods_price}));this.setData({valueStr:l,valueStrNum:c}),t("log",this.valueStrNum,"ggggggggggg"," at pages\\product-detail\\product-detail.vue:731")}}};e.default=o}).call(this,a("0de9")["default"],a("6e42")["default"])},f9d5:function(t,e,a){"use strict";(function(t){a("f9cd"),a("921b");i(a("66fd"));var e=i(a("2d95"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])}},[["f9d5","common/runtime","common/vendor"]]]);